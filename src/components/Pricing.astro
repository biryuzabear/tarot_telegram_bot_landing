---
const botUrl = import.meta.env.PUBLIC_BOT_URL || 'https://t.me/your_bot';

const plans = [
  {
    name: "Бесплатно",
    price: "0",
    period: "",
    description: "Попробуйте прямо сейчас",
    features: [
      "Ежедневный бесплатный расклад",
      "3 премиум-расклада в подарок",
    ],
    cta: "Начать бесплатно",
    highlight: false,
  },
  {
    name: "Стартер",
    price: "49",
    period: "/ 5 раскладов",
    description: "Попробовать для себя",
    features: [
      "5 продвинутых раскладов",
      "Для вечера с собой",
      "Разобраться в вопросе",
      "Все типы раскладов",
      "Голосовые вопросы",
      "Анализ фото раскладов",
    ],
    cta: "Выбрать",
    highlight: false,
  },
  {
    name: "Стандарт",
    price: "199",
    period: "/ 40 раскладов",
    description: "Для вечеринки с друзьями",
    features: [
      "40 продвинутых раскладов",
      "Хватит на месяц",
      "Для большой вечеринки",
      "Все типы раскладов",
      "Голосовые вопросы",
      "Анализ фото раскладов",
    ],
    cta: "Выбрать",
    highlight: true,
  },
  {
    name: "Премиум",
    price: "399",
    period: "/ 100 раскладов",
    description: "Самый выгодный",
    features: [
      "100 продвинутых раскладов",
      "Не думайте о пополнениях",
      "Для активного использования",
      "Все типы раскладов",
      "Голосовые вопросы",
      "Анализ фото раскладов",
    ],
    cta: "Выбрать",
    highlight: false,
  },
];
---

<section id="pricing" class="py-16 relative">
  <!-- Background -->
  <div class="absolute inset-0 bg-gradient-to-b from-dark-950 via-dark-900/30 to-dark-950"></div>

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section header -->
    <div class="text-center mb-16">
      <span class="inline-block px-4 py-1.5 bg-primary-500/10 border border-primary-500/20 rounded-full text-primary-300 text-sm font-medium mb-4">
        Тарифы
      </span>
      <h2 class="font-display text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-4">
        Выберите свой пакет
      </h2>
      <p class="text-dark-300 text-lg max-w-2xl mx-auto">
        Платите только за то, что используете. Без подписок и скрытых платежей.
      </p>
    </div>

    <!-- Pricing cards -->
    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      {plans.map((plan) => (
        <div class={`relative rounded-2xl p-6 transition-all ${
          plan.highlight
            ? 'bg-gradient-to-b from-primary-900/50 to-dark-800/50 border-2 border-primary-500/50 shadow-xl shadow-primary-500/10'
            : 'bg-dark-800/30 border border-white/5 hover:border-white/10'
        }`}>
          {/* Popular badge */}
          {plan.highlight && (
            <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-primary-500 rounded-full text-xs font-bold text-white">
              Популярный
            </div>
          )}

          {/* Plan info */}
          <div class="mb-6">
            <h3 class="font-display text-xl font-semibold text-white mb-1">
              {plan.name}
            </h3>
            <p class="text-dark-400 text-sm">
              {plan.description}
            </p>
          </div>

          {/* Price */}
          <div class="mb-6">
            <span class="font-display text-4xl font-bold text-white">
              {plan.price}₽
            </span>
            <span class="text-dark-400 text-sm">
              {plan.period}
            </span>
          </div>

          {/* Features */}
          <ul class="space-y-3 mb-8">
            {plan.features.map((feature) => (
              <li class="flex items-start gap-2 text-sm">
                <svg class={`w-5 h-5 flex-shrink-0 ${plan.highlight ? 'text-primary-400' : 'text-dark-400'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                <span class="text-dark-200">{feature}</span>
              </li>
            ))}
          </ul>

          {/* CTA */}
          <a
            href={botUrl}
            target="_blank"
            class={`block w-full py-3 rounded-full font-medium text-center transition-all ${
              plan.highlight
                ? 'bg-primary-600 hover:bg-primary-500 text-white shadow-lg shadow-primary-500/25'
                : 'bg-white/5 hover:bg-white/10 text-white border border-white/10'
            }`}
          >
            {plan.cta}
          </a>
        </div>
      ))}
    </div>

    {/* Note */}
    <p class="text-center text-dark-400 text-sm mt-8">
      Оплата через Telegram Stars или банковскую карту. Расклады не сгорают.
    </p>
  </div>
</section>
